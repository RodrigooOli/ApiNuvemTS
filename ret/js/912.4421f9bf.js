(self["webpackChunkret"]=self["webpackChunkret"]||[]).push([[912],{3912:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>U});var a=o(3673),i=o(8880);const r=(0,a.Uk)(" FILTROS "),s=(0,a.Wm)("label",null,"Data Início",-1),l=(0,a.Wm)("br",null,null,-1),n=(0,a.Wm)("label",null,"Data Fim",-1),m=(0,a.Wm)("br",null,null,-1),d=(0,a.Uk)(" Gerar relatório ");function u(t,e,o,u,p,c){const f=(0,a.up)("RelatorioPage"),h=(0,a.up)("q-toolbar-title"),b=(0,a.up)("q-toolbar"),w=(0,a.up)("q-input"),g=(0,a.up)("q-btn"),v=(0,a.up)("q-form"),q=(0,a.up)("q-item-section"),z=(0,a.up)("q-item"),F=(0,a.up)("q-list"),W=(0,a.up)("q-drawer"),_=(0,a.Q2)("ripple");return(0,a.wg)(),(0,a.j4)("div",null,[(0,a.Wm)(f,{rows:t.rows,columns:t.columns,totais:t.totais,filtros:t.filtros,totaisColunas:t.totaisColunas,title:"Faturamento Por Dia",onToggleDrawerFilters:e[1]||(e[1]=e=>t.drawerFilters=!t.drawerFilters)},null,8,["rows","columns","totais","filtros","totaisColunas"]),(0,a.Wm)(W,{"show-if-above":"",modelValue:t.drawerFilters,"onUpdate:modelValue":e[4]||(e[4]=e=>t.drawerFilters=e),side:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[r])),_:1})])),_:1}),(0,a.Wm)(F,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{onSubmit:(0,i.iM)(t.gerarRelatorio,["prevent","stop"]),style:{width:"100%","max-width":"400px"}},{default:(0,a.w5)((()=>[s,(0,a.Wm)(w,{type:"date",filled:"",modelValue:t.filtros.dataIni,"onUpdate:modelValue":e[2]||(e[2]=e=>t.filtros.dataIni=e)},null,8,["modelValue"]),l,n,(0,a.Wm)(w,{type:"date",filled:"",modelValue:t.filtros.dataFim,"onUpdate:modelValue":e[3]||(e[3]=e=>t.filtros.dataFim=e)},null,8,["modelValue"]),m,(0,a.wy)((0,a.Wm)(g,{color:"blue",class:"q-pa-md",type:"submit",style:{width:"100%"},onClick:t.closeMenuFiltros},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"]),[[_]])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}o(107);var p=o(1959),c=o(4459),f=o(4399),h=o(3649);const b=(0,p.iH)({dataIni:(0,h.C3)(0,3).inicio,dataFim:(0,h.C3)(0,3).fim}),w=[t=>!!t.dataIni&&!!t.dataFim||"Informe o período!"],g=function(t){return t.map((t=>{const e=this.$store.state.lojas.ls.find((e=>e.id==t.id)).nome;return{loja:e,datareg:new Date(t.datareg),dinheiro:(0,h.p3)(t.dinheiro),pix:(0,h.p3)(t.pix),credito:(0,h.p3)(t.credito),debito:(0,h.p3)(t.debito),troca:(0,h.p3)(t.troca),outros:(0,h.p3)(t.outros),voucher:(0,h.p3)(t.voucher),recebimento_convenio:(0,h.p3)(t.recebimento_convenio),totalsemprazo:(0,h.p3)(t.totalsemprazo),prazo:(0,h.p3)(t.prazo),totalcomprazo:(0,h.p3)(t.totalcomprazo),pagamentos:(0,h.p3)(t.pagamentos),liquidosemprazo:(0,h.p3)(t.liquidosemprazo),qtdvendas:(0,h.p3)(t.qtdvendas),tkmedio:(0,h.p3)(t.tkmedio)}}))},v={datareg:"Data",credito:"Crédito",debito:"Débito",totalsemprazo:"Total Sem Prazo",totalcomprazo:"Total com prazo",qtdvendas:"Quantidade vendas",tkmedio:"Ticket médio",recebimento_convenio:"Recebimentos convênio",liquidosemprazo:"Líquido sem prazo"},q=t=>{const e=t.reduce(((t,e)=>t+e.totalcomprazo),0),o=t.reduce(((t,e)=>t+e.qtdvendas),0);return(0,h.im)(e/o)},z={pix:t=>(0,h.im)(t.reduce(((t,e)=>t+e.pix),0)),pagamentos:t=>(0,h.im)(t.reduce(((t,e)=>t+e.pagamentos),0)),recebimento_convenio:t=>(0,h.im)(t.reduce(((t,e)=>t+e.recebimento_convenio),0)),liquidosemprazo:t=>(0,h.im)(t.reduce(((t,e)=>t+e.liquidosemprazo),0)),dinheiro:t=>(0,h.im)(t.reduce(((t,e)=>t+e.dinheiro),0)),credito:t=>(0,h.im)(t.reduce(((t,e)=>t+e.credito),0)),debito:t=>(0,h.im)(t.reduce(((t,e)=>t+e.debito),0)),troca:t=>(0,h.im)(t.reduce(((t,e)=>t+e.troca),0)),outros:t=>(0,h.im)(t.reduce(((t,e)=>t+e.outros),0)),voucher:t=>(0,h.im)(t.reduce(((t,e)=>t+e.voucher),0)),totalsemprazo:t=>(0,h.im)(t.reduce(((t,e)=>t+e.totalsemprazo),0)),prazo:t=>(0,h.im)(t.reduce(((t,e)=>t+e.prazo),0)),totalcomprazo:t=>(0,h.im)(t.reduce(((t,e)=>t+e.totalcomprazo),0)),qtdvendas:t=>parseFloat(t.reduce(((t,e)=>t+e.qtdvendas),0).toFixed(3)),tkmedio:q},F={datareg:t=>new Date(t).toLocaleDateString("pt-br"),dinheiro:t=>(0,h.im)(t),pix:t=>(0,h.im)(t),credito:t=>(0,h.im)(t),debito:t=>(0,h.im)(t),troca:t=>(0,h.im)(t),outros:t=>(0,h.im)(t),voucher:t=>(0,h.im)(t),totalsemprazo:t=>(0,h.im)(t),prazo:t=>(0,h.im)(t),totalcomprazo:t=>(0,h.im)(t),qtdvendas:t=>parseFloat(parseFloat(t).toFixed(3)),tkmedio:t=>(0,h.im)(t),recebimento_convenio:t=>(0,h.im)(t),liquidosemprazo:t=>(0,h.im)(t),pagamentos:t=>(0,h.im)(t)},W=function(t){return[]},_=function(t){return Object.keys(t).map((e=>({name:e,label:(this.labels[e]||e).toUpperCase(),field:e,align:isNaN(parseInt(t[e]))||"datareg"===e?"left":"right",sortable:!0,format:this.format[e]})))},k=(0,a.aZ)({name:"FaturamentoPorDia",components:{RelatorioPage:f.Z},setup:()=>({filtros:b,format:F,labels:v,validate:w,setRows:g,setColumns:_,setTotais:W,totaisColunas:z}),data(){return{drawerFilters:!1,totais:[],rows:[],columns:[]}},async mounted(){await c.b.getFormasDePagamento(),this.$q.sessionStorage.getItem("gp-formas-pgto")},methods:{setFormasPgto(t){this.$q.sessionStorage.set("gp-formas-pgto",t)},async gerarRelatorio(){if(!await this.valida())return;const t=await c.b.gerarRelatorio("faturamento_por_dia",this.filtros);this.rows=this.setRows.bind(this)(t),this.columns=this.setColumns.bind(this)(this.rows[0]||{}),this.totais=this.setTotais.bind(this)(this.rows)},async valida(){const t=this.validate||[];for(let e=0;e<t.length;e++){const o=t[e],a=await o(this.filtros);if("string"===typeof a)return this.$q.notify({type:"negative",message:a}),!1}return!0},closeMenuFiltros(){this.drawerFilters=innerWidth>1200||!this.drawerFilters}}});var C=o(2428),y=o(9570),D=o(3747),I=o(7011),Z=o(3414),Q=o(2035),R=o(5269),T=o(4842),x=o(2165),V=o(6489),S=o(7518),P=o.n(S);k.render=u;const U=k;P()(k,"components",{QDrawer:C.Z,QToolbar:y.Z,QToolbarTitle:D.Z,QList:I.Z,QItem:Z.Z,QItemSection:Q.Z,QForm:R.Z,QInput:T.Z,QBtn:x.Z}),P()(k,"directives",{Ripple:V.Z})}}]);