(self["webpackChunkret"]=self["webpackChunkret"]||[]).push([[422],{4422:(t,a,e)=>{"use strict";e.r(a),e.d(a,{default:()=>j});var l=e(3673),i=e(8880);const s=(0,l.Uk)(" FILTROS "),o=(0,l.Wm)("label",null,"Data Início",-1),r=(0,l.Wm)("br",null,null,-1),n=(0,l.Wm)("label",null,"Data Fim",-1),u=(0,l.Wm)("br",null,null,-1),d=(0,l.Uk)(" Gerar relatório ");function m(t,a,e,m,p,c){const f=(0,l.up)("RelatorioPage"),w=(0,l.up)("q-toolbar-title"),h=(0,l.up)("q-toolbar"),b=(0,l.up)("q-input"),F=(0,l.up)("q-btn"),g=(0,l.up)("q-form"),v=(0,l.up)("q-item-section"),W=(0,l.up)("q-item"),C=(0,l.up)("q-list"),y=(0,l.up)("q-drawer"),Z=(0,l.Q2)("ripple");return(0,l.wg)(),(0,l.j4)("div",null,[(0,l.Wm)(f,{rows:t.rows,columns:t.columns,totais:t.totais,filtros:t.filtros,totaisColunas:t.totaisColunas,title:"Despesas de caixa",onToggleDrawerFilters:a[1]||(a[1]=a=>t.drawerFilters=!t.drawerFilters)},null,8,["rows","columns","totais","filtros","totaisColunas"]),(0,l.Wm)(y,{"show-if-above":"",modelValue:t.drawerFilters,"onUpdate:modelValue":a[4]||(a[4]=a=>t.drawerFilters=a),side:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(w,null,{default:(0,l.w5)((()=>[s])),_:1})])),_:1}),(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{onSubmit:(0,i.iM)(t.gerarRelatorio,["prevent","stop"]),style:{width:"100%","max-width":"400px"}},{default:(0,l.w5)((()=>[o,(0,l.Wm)(b,{type:"date",filled:"",modelValue:t.filtros.dataIni,"onUpdate:modelValue":a[2]||(a[2]=a=>t.filtros.dataIni=a)},null,8,["modelValue"]),r,n,(0,l.Wm)(b,{type:"date",filled:"",modelValue:t.filtros.dataFim,"onUpdate:modelValue":a[3]||(a[3]=a=>t.filtros.dataFim=a)},null,8,["modelValue"]),u,(0,l.wy)((0,l.Wm)(F,{color:"blue",class:"q-pa-md",type:"submit",style:{width:"100%"},onClick:t.closeMenuFiltros},{default:(0,l.w5)((()=>[d])),_:1},8,["onClick"]),[[Z]])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}var p=e(1959),c=e(4459),f=e(4399),w=e(3649);const h=(0,p.iH)({dataIni:(0,w.C3)(0,3).inicio,dataFim:(0,w.C3)(0,3).fim}),b=[t=>!!t.dataIni&&!!t.dataFim||"Informe o período!"],F=function(t){return t.map((t=>{const a=this.$store.state.lojas.ls.find((a=>a.id==t.id)).nome;return{loja:a,data:new Date(t.data_despesa),caixa:t.caixa,descricao:t.descricao,valor:(0,w.p3)(t.valor)}}))},g={valor:"Valor (R$)",data:"data/hora"},v={valor:t=>(0,w.im)(t),data:t=>t.toLocaleString("pt-br")},W={},C=function(t){return[]},y=function(t){return Object.keys(t).map((a=>({name:a,label:(this.labels[a]||a).toUpperCase(),field:a,align:isNaN(parseInt(t[a]))?"left":"right",sortable:!0,format:this.format[a]})))},Z=(0,l.aZ)({name:"DespesasDeCaixa",components:{RelatorioPage:f.Z},setup:()=>({filtros:h,format:v,labels:g,validate:b,setRows:F,setColumns:y,setTotais:C,totaisColunas:W}),data(){return{drawerFilters:!1,totais:[],rows:[],columns:[]}},methods:{async gerarRelatorio(){if(!await this.valida())return;const t=await c.b.gerarRelatorio("despesas_dos_caixas",this.filtros);this.rows=this.setRows.bind(this)(t),this.columns=this.setColumns.bind(this)(this.rows[0]||{}),this.totais=this.setTotais.bind(this)(this.rows)},async valida(){const t=this.validate||[];for(let a=0;a<t.length;a++){const e=t[a],l=await e(this.filtros);if("string"===typeof l)return this.$q.notify({type:"negative",message:l}),!1}return!0},closeMenuFiltros(){this.drawerFilters=innerWidth>1200||!this.drawerFilters}}});var q=e(2428),I=e(9570),_=e(3747),Q=e(7011),R=e(3414),V=e(2035),k=e(5269),D=e(4842),x=e(2165),T=e(6489),U=e(7518),S=e.n(U);Z.render=m;const j=Z;S()(Z,"components",{QDrawer:q.Z,QToolbar:I.Z,QToolbarTitle:_.Z,QList:Q.Z,QItem:R.Z,QItemSection:V.Z,QForm:k.Z,QInput:D.Z,QBtn:x.Z}),S()(Z,"directives",{Ripple:T.Z})}}]);