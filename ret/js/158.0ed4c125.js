(self["webpackChunkbase"]=self["webpackChunkbase"]||[]).push([[158],{4158:(o,l,e)=>{"use strict";e.r(l),e.d(l,{default:()=>Co});var a=e(3673),t=e(2323);const s={class:"flex justify-end bg-blue-1"},n=(0,a.Uk)("Nova Loja"),i=(0,a.Wm)("br",null,null,-1),r=(0,a.Wm)("br",null,null,-1);function d(o,l,e,d,m,u){const c=(0,a.up)("q-btn"),p=(0,a.up)("q-td"),h=(0,a.up)("q-tr"),w=(0,a.up)("q-table"),g=(0,a.up)("ModalLoja"),j=(0,a.up)("ModalOpcoesLoja"),b=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(b,{class:"q-pa"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",s,[(0,a.Wm)(c,{color:"primary",onClick:o.showModalLoja},{default:(0,a.w5)((()=>[n])),_:1},8,["onClick"])]),i,r,(0,a.Wm)(w,{title:"Lojas",rows:o.rows,columns:o.columns,"no-data-label":"Nenhuma loja encontrada",flat:"","table-header-class":"bg-blue-4 text-white radius-10","card-class":"shadow-15"},{body:(0,a.w5)((l=>[(0,a.Wm)(h,{props:l,onClick:()=>o.opcoesLoja(l.row.id)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(Object.keys(l.row),(o=>((0,a.wg)(),(0,a.j4)(p,{key:o,props:l,class:"bloqueado"===o?"SIM"===l.row[o]?"text-red-9 bg-red-2":"text-green-9 bg-green-2":""},{default:(0,a.w5)((()=>[(0,a.Wm)("span",null,(0,t.zw)(l.row[o]),1)])),_:2},1032,["props","class"])))),128))])),_:2},1032,["props","onClick"])])),_:1},8,["rows","columns"]),(0,a.Wm)(g,{model:o.mloja,onHide:l[1]||(l[1]=l=>o.mloja=!1),onNovaLoja:o.novaLoja},null,8,["model","onNovaLoja"]),(0,a.Wm)(j,{model:o.mopcloja,onHide:l[2]||(l[2]=l=>o.mopcloja=!1),id:o.idLoja},null,8,["model","id"])])),_:1})}var m=e(515),u=e.n(m),c=(e(71),e(1959)),p=e(8880);const h={class:"flex"},w=(0,a.Wm)("span",{class:"q-ml-sm text-grey"}," Loja do Galileo Plus ",-1),g=(0,a.Wm)("br",null,null,-1),j={class:"q-ml-sm text-grey"},b=(0,a.Uk)(" Representante "),W=(0,a.Wm)("br",null,null,-1),f=(0,a.Wm)("br",null,null,-1),C={class:"row"},v={class:"col-xs-12 col-sm-12 col-md-12 col-lg-12 q-pa-xs"},q={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pa-xs"},L={class:"col-xs-12 col-sm-12 col-md-6 col-lg-6 q-pa-xs"};function x(o,l,e,s,n,i){const r=(0,a.up)("q-avatar"),d=(0,a.up)("q-input"),m=(0,a.up)("q-select"),u=(0,a.up)("q-card-section"),c=(0,a.up)("q-btn"),x=(0,a.up)("q-card-actions"),A=(0,a.up)("q-form"),y=(0,a.up)("q-card"),S=(0,a.up)("q-dialog"),k=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(S,{modelValue:e.model,"onUpdate:modelValue":l[6]||(l[6]=o=>e.model=o),onHide:i.hide,onShow:i.onShowDialog},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{position:"absolute",width:"100vw","max-width":"800px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{onSubmit:(0,p.iM)(i.submit,["prevent","stop"])},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",h,[(0,a.Wm)(r,{icon:"add_business",color:"primary","text-color":"white"}),(0,a.Wm)("div",null,[w,g,(0,a.Wm)("span",j,[b,(0,a.Wm)("strong",null,(0,t.zw)(o.$store.state.repr.nome),1)])])]),W,f,(0,a.Wm)("div",C,[(0,a.Wm)("div",v,[(0,a.Wm)(d,{filled:"",modelValue:s.form.nome,"onUpdate:modelValue":l[1]||(l[1]=o=>s.form.nome=o),label:"Nome",rules:[o=>o&&o.length>0||"Campo obrigatório*"]},null,8,["modelValue","rules"])]),(0,a.Wm)("div",q,[(0,a.Wm)(m,{modelValue:s.form.codCliente,"onUpdate:modelValue":l[2]||(l[2]=o=>s.form.codCliente=o),options:n.codigosEmpresa,"use-input":"",onKeyup:l[3]||(l[3]=({target:o})=>i.filterCodEmpresa(o.value)),label:"Código da empresa",filled:"",behavior:"menu",rules:[o=>""!=o&&n.codigosEmpresa.includes(o)||"Campo obrigatório*"],hint:"Associar com uma loja existente ou gerar um novo"},null,8,["modelValue","options","rules"])]),(0,a.Wm)("div",L,[(0,a.Wm)(m,{modelValue:s.form.plano,"onUpdate:modelValue":l[4]||(l[4]=o=>s.form.plano=o),options:["0 - Básico","1 - Intermediário","2 - Top","3 - Premium"],label:"Plano",filled:"",behavior:"menu",rules:[o=>""!=o||"Campo obrigatório*"]},null,8,["modelValue","rules"])])])])),_:1}),(0,a.Wm)(x,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(c,{flat:"",label:"Cancelar",color:"primary",onClick:l[5]||(l[5]=o=>s.form.clean())},null,512),[[k]]),(0,a.Wm)(c,{type:"submit",label:"Cadastrar",color:"primary"})])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue","onHide","onShow"])}e(7280),e(5363);const A={name:"ModalLoja",props:{model:Boolean},setup(){const o=(0,c.iH)({nome:"",codCliente:"",plano:"",idRepresentante:"",clean(){this.nome="",this.codCliente="",this.plano="",this.idRepresentante=""}});return{form:o}},data(){return{filterCod:"",codigosEmpresa:[]}},methods:{onShowDialog(){this.form.idRepresentante=this.$store.state.repr.id,this.codigosEmpresa=["[###] - Gerar novo código",...this.$store.state.lojas.codsEmpresa.map((o=>`[${o.cod_cliente}] - ${o.nome}`))]},submit(){this.$emit("novaLoja",u()(u()({},this.form),{},{plano:this.form.plano.replace(/\D/g,""),codCliente:this.form.codCliente.match(/(\[.*\])/g)[0].replace(/\[|\]/g,"")}))},hide(){this.$emit("hide"),this.form.clean()},filterCodEmpresa(o){this.filterCod=o}},watch:{filterCod:{handler(){this.codigosEmpresa=["[###] - Gerar novo código",...this.$store.state.lojas.codsEmpresa.map((o=>`[${o.cod_cliente}] - ${o.nome}`))].filter((o=>o.toLowerCase().includes(this.filterCod.toLowerCase())))}}}};var y=e(6778),S=e(151),k=e(5269),_=e(5589),Q=e(5096),Z=e(4842),O=e(8516),E=e(9367),N=e(2165),U=e(677),V=e(7518),$=e.n(V);A.render=x;const R=A;$()(A,"components",{QDialog:y.Z,QCard:S.Z,QForm:k.Z,QCardSection:_.Z,QAvatar:Q.Z,QInput:Z.Z,QSelect:O.Z,QCardActions:E.Z,QBtn:N.Z}),$()(A,"directives",{ClosePopup:U.Z});const P={class:"flex justify-between"},B=(0,a.Wm)("br",null,null,-1),M=(0,a.Wm)("br",null,null,-1),I=(0,a.Wm)("br",null,null,-1),J=(0,a.Wm)("br",null,null,-1),H=(0,a.Wm)("br",null,null,-1),z={class:"flex justify-between"},D=(0,a.Wm)("span",{class:"text-grey"},"Loja",-1),T=(0,a.Wm)("br",null,null,-1),G={class:"text-h5"},F=(0,a.Wm)("br",null,null,-1),K=(0,a.Wm)("br",null,null,-1),Y=(0,a.Wm)("br",null,null,-1),X=(0,a.Wm)("br",null,null,-1),oo=(0,a.Wm)("br",null,null,-1),lo=(0,a.Wm)("br",null,null,-1),eo=(0,a.Wm)("br",null,null,-1),ao={class:"flex justify-between",style:{"word-wrap":"break-word"}},to=(0,a.Wm)("span",null," Assinatura SAT: ",-1),so={class:"full-width bg-grey-3 q-pa-sm"},no={class:"q-ml-sm"},io=(0,a.Wm)("br",null,null,-1),ro={key:0,align:"right",class:"text-red",style:{"font-size":"12px"}},mo={key:1,align:"right",class:"text-red",style:{"font-size":"12px"}};function uo(o,l,e,s,n,i){const r=(0,a.up)("q-skeleton"),d=(0,a.up)("q-btn"),m=(0,a.up)("q-card-section"),u=(0,a.up)("q-card"),c=(0,a.up)("q-card-actions"),p=(0,a.up)("q-dialog"),h=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(p,{modelValue:e.model,"onUpdate:modelValue":l[3]||(l[3]=o=>e.model=o),onHide:i.hide,onShow:i.onShowDialog},{default:(0,a.w5)((()=>[n.loading?((0,a.wg)(),(0,a.j4)(u,{key:0,style:{position:"absolute",width:"100vw","max-width":"800px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)("div",P,[(0,a.Wm)("div",null,[(0,a.Wm)(r,{height:"10px",width:"48px"}),B,(0,a.Wm)(r,{height:"20px",width:"100px"})]),(0,a.Wm)("div",null,[(0,a.wy)((0,a.Wm)(d,{icon:"close",round:"",flat:"",color:"red"},null,512),[[h]])])]),M,(0,a.Wm)(r,{height:"16px"}),I,(0,a.Wm)(r,{height:"16px"}),J,(0,a.Wm)(r,{height:"16px"}),H,(0,a.Wm)(r,{width:"100%",height:"100px"})])),_:1})])),_:1})):(0,a.kq)("",!0),n.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(u,{key:1,style:{position:"absolute",width:"100vw","max-width":"800px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:""},{default:(0,a.w5)((()=>[(0,a.Wm)("div",z,[(0,a.Wm)("div",null,[D,T,(0,a.Wm)("span",G,(0,t.zw)(n.loja["nome"]),1)]),(0,a.Wm)("div",null,[(0,a.wy)((0,a.Wm)(d,{icon:"close",round:"",flat:"",color:"red"},null,512),[[h]])])]),F,(0,a.Wm)("span",null," Código da empresa: "+(0,t.zw)(n.loja["codCliente"]),1),K,Y,(0,a.Wm)("span",null," ID: "+(0,t.zw)(n.loja["id"]),1),X,oo,(0,a.Wm)("span",null,"CPF / CNPJ: "+(0,t.zw)(n.loja["cpfCnpj"]),1),lo,eo,(0,a.Wm)("div",ao,[to,(0,a.Wm)("div",so,(0,t.zw)(n.loja["assinaturaSat"]),1)])])),_:1}),(0,a.Wm)(c,{class:"flex justify-end items-start"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{color:n.loja["bloqueado"]?"positive":"negative",icon:n.loja["bloqueado"]?"check":"close",label:n.loja["bloqueado"]?"DESBLOQUEAR LOJA":"BLOQUEAR LOJA",class:"q-mb-sm",onClick:l[1]||(l[1]=()=>i.bloqueioLoja(n.loja["id"]))},null,8,["color","icon","label"]),(0,a.Wm)("div",no,[(0,a.Wm)(d,{color:"primary",icon:"generating_tokens",label:"GERAR ASSINATURA SAT",disable:14!==`${n.loja["cpfCnpj"]}`.length,onClick:l[2]||(l[2]=()=>i.gerarAssinaturaSat(n.loja["id"]))},null,8,["disable"]),io,n.loja["cpfCnpj"]?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)("div",ro," Pendente da ativação do sistema ")),n.loja["cpfCnpj"]&&14!==`${n.loja["cpfCnpj"]}`.length?((0,a.wg)(),(0,a.j4)("div",mo," É necessário um CNPJ ")):(0,a.kq)("",!0)])])),_:1})])),_:1}))])),_:1},8,["modelValue","onHide","onShow"])}var co=e(7874);const po={name:"ModalOpcoesLoja",props:{model:Boolean,id:String},data(){return{loja:{},loading:!0}},methods:u()(u()({},(0,co.nv)("lojas",["GERAR_ASSINATURA","BLOQUEIO_LOJA"])),{},{onShowDialog(){const o=this.$store.state.lojas.ls.findIndex((o=>o.id===this.$props.id));-1!=o&&(this.loja=this.$store.state.lojas.ls[o],this.loading=!this.loading)},hide(){this.loading=!this.loading,this.$emit("hide")},gerarAssinaturaSat(o){this.GERAR_ASSINATURA(o)},bloqueioLoja(o){this.BLOQUEIO_LOJA(o)}})};var ho=e(4103);po.render=uo;const wo=po;$()(po,"components",{QDialog:y.Z,QCard:S.Z,QCardSection:_.Z,QSkeleton:ho.ZP,QBtn:N.Z,QCardActions:E.Z}),$()(po,"directives",{ClosePopup:U.Z});const go=(0,a.aZ)({name:"LojasPage",components:{ModalLoja:R,ModalOpcoesLoja:wo},setup(){const o=(0,c.iH)(!1),l=(0,c.iH)(!1);return{mloja:o,mopcloja:l}},data(){return{idLoja:""}},mounted(){this.BUSCA_LOJAS()},methods:u()(u()({},(0,co.nv)("lojas",["BUSCA_LOJAS","NOVA_LOJA"])),{},{showModalLoja(){this.mloja=!this.mloja},opcoesLoja(o){this.mopcloja=!this.mopcloja,this.idLoja=o},async novaLoja(o){const l=await this.NOVA_LOJA(o);l&&this.showModalLoja()}}),computed:{rowsComputed(){return(this.$store.state.lojas.ls||[]).map((o=>({id:o.id,nome:o.nome,codigo:o.codCliente,cadastro:o.cadastro.toLocaleString("pt-br"),CPF_CNPJ:o.cpfCnpj,plano:o.plano,representante:o.nomeRepresentante,bloqueado:1==o.bloqueado?"SIM":"NÃO"})))},rows(){return this.rowsComputed},columns(){const o=this.rowsComputed[0]||{};return[...Object.keys(o).map((l=>({name:l,align:isNaN(Number(o[l]))?"left":"right",label:l.toUpperCase(),field:l,sortable:!0})))]}}});var jo=e(4379),bo=e(6429),Wo=e(8186),fo=e(3884);go.render=d;const Co=go;$()(go,"components",{QPage:jo.Z,QBtn:N.Z,QTable:bo.Z,QTr:Wo.Z,QTd:fo.Z})}}]);