(self["webpackChunkret"]=self["webpackChunkret"]||[]).push([[503],{9503:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>xe});var o=l(3673),i=l(2323),n=l(8880);const s=(0,o.HX)("data-v-7d6b12d1");(0,o.dD)("data-v-7d6b12d1");const a=(0,o.Wm)("div",{class:"flex q-pl-md justify-between"},[(0,o.Wm)("span",{class:"text-blue text-h5"},"Féria do Período")],-1),r=(0,o.Wm)("br",null,null,-1),d={class:"flex items-center q-pl-md q-pr-md"},m=(0,o.Wm)("span",{class:"gt-sm q-pl-sm"},"Imprimir",-1),u=(0,o.Wm)("span",{class:"gt-sm q-pl-sm"},"Exportar",-1),p=(0,o.Wm)("span",null,"Excel",-1),c=(0,o.Wm)("span",null,"Planilhas Online",-1),f=(0,o.Wm)("br",null,null,-1),b=(0,o.Wm)("br",null,null,-1),w={class:"flex"},h={key:0,class:"text-h5 text-bold"},g={key:1,class:"text-h5 text-bold"},W=(0,o.Wm)("br",null,null,-1),y=(0,o.Wm)("br",null,null,-1),x=(0,o.Uk)(" FILTROS "),_=(0,o.Wm)("label",null,"Data Início",-1),q=(0,o.Wm)("br",null,null,-1),v=(0,o.Wm)("label",null,"Data Fim",-1),k=(0,o.Wm)("br",null,null,-1),F=(0,o.Wm)("label",null,"Origem dos Valores",-1),j=(0,o.Wm)("br",null,null,-1),C=(0,o.Uk)(" Gerar relatório "),I=(0,o.Wm)("iframe",{id:"iframe_print",style:{display:"none"}},null,-1),S={id:"testeimpressao",style:{display:"none"}},T={style:{display:"flex","justify-content":"start","align-items":"center",color:"#70a0ff","font-family":"sans-serif"}},Z={style:{padding:"10px"}},z=(0,o.Wm)("h2",null,"Féria do período",-1),Q={style:{display:"flex","justify-content":"flex-end","font-size":"14px","font-weight":"bold",color:"#70a0ff"}},V=(0,o.Wm)("div",{style:{width:"100%",height:"1px","background-color":"#70a0ff"}},null,-1),D={style:{display:"flex"}},O={key:0,style:{"font-size":"20px"}},$={key:1,style:{"font-size":"20px"}},R=(0,o.Wm)("strong",null,"Total do período",-1),E=(0,o.Wm)("br",null,null,-1),H=(0,o.Wm)("br",null,null,-1),L={style:{flex:"1"}};(0,o.Cn)();const M=s(((e,t,l,M,U,K)=>{const N=(0,o.up)("q-btn"),P=(0,o.up)("q-item-section"),Y=(0,o.up)("q-item"),A=(0,o.up)("q-list"),G=(0,o.up)("q-menu"),B=(0,o.up)("q-space"),X=(0,o.up)("q-toolbar-title"),J=(0,o.up)("q-toolbar"),ee=(0,o.up)("q-input"),te=(0,o.up)("q-select"),le=(0,o.up)("q-form"),oe=(0,o.up)("q-drawer"),ie=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)("div",null,[a,r,(0,o.Wm)("div",d,[(0,o.Wm)(N,{class:"q-mb-sm bg-blue text-white on-left",icon:"print",onClick:e.imprimir},{default:s((()=>[m])),_:1},8,["onClick"]),(0,o.Wm)(N,{class:"q-mb-sm bg-blue text-white on-left",icon:"file_download"},{default:s((()=>[u,(0,o.Wm)(G,null,{default:s((()=>[(0,o.Wm)(A,null,{default:s((()=>[(0,o.Wm)(Y,{clickable:"",onClick:t[1]||(t[1]=t=>e.exportar(0))},{default:s((()=>[(0,o.Wm)(P,null,{default:s((()=>[p])),_:1})])),_:1}),(0,o.Wm)(Y,{clickable:"",onClick:t[2]||(t[2]=t=>e.exportar(1))},{default:s((()=>[(0,o.Wm)(P,null,{default:s((()=>[c])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,o.Wm)(B),(0,o.Wm)(N,{icon:"filter_list",label:"",class:"text-white bg-blue q-mb-sm",onClick:t[3]||(t[3]=t=>e.drawerFilters=!e.drawerFilters)})]),f,b,(0,o.Wm)("div",w,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.rows,((t,l)=>((0,o.wg)(),(0,o.j4)("div",{key:l,class:"card q-pa-md q-ma-md",style:{width:"100%","max-width":"400px"}},[9!==t["id_turno"]?((0,o.wg)(),(0,o.j4)("span",h,"Turno "+(0,i.zw)(t["id_turno"]),1)):(0,o.kq)("",!0),9===t["id_turno"]?((0,o.wg)(),(0,o.j4)("span",g,"Total do período")):(0,o.kq)("",!0),W,y,((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(Object.keys(t),((l,n)=>((0,o.wg)(),(0,o.j4)("div",{key:n,class:`flex justify-between q-pa-xs ${e.classes[l]?e.classes[l](t[l],t):""}`},[(0,o.Wm)("span",null,(0,i.zw)(e.columns.find((e=>e.name===l)).label),1),(0,o.Wm)("span",null,(0,i.zw)(e.columns.find((e=>e.name===l)).format?e.columns.find((e=>e.name===l)).format(t[l],t):t[l]),1)],2)))),128))])))),128))]),(0,o.Wm)(oe,{"show-if-above":"",modelValue:e.drawerFilters,"onUpdate:modelValue":t[7]||(t[7]=t=>e.drawerFilters=t),side:"right"},{default:s((()=>[(0,o.Wm)(J,null,{default:s((()=>[(0,o.Wm)(X,null,{default:s((()=>[x])),_:1})])),_:1}),(0,o.Wm)(A,null,{default:s((()=>[(0,o.Wm)(Y,null,{default:s((()=>[(0,o.Wm)(P,null,{default:s((()=>[(0,o.Wm)(le,{onSubmit:(0,n.iM)(e.gerarRelatorio,["prevent","stop"]),style:{width:"100%","max-width":"400px"}},{default:s((()=>[_,(0,o.Wm)(ee,{type:"date",filled:"",modelValue:e.filtros.dataIni,"onUpdate:modelValue":t[4]||(t[4]=t=>e.filtros.dataIni=t)},null,8,["modelValue"]),q,v,(0,o.Wm)(ee,{type:"date",filled:"",modelValue:e.filtros.dataFim,"onUpdate:modelValue":t[5]||(t[5]=t=>e.filtros.dataFim=t)},null,8,["modelValue"]),k,F,(0,o.Wm)(te,{filled:"",modelValue:e.filtros.origem,"onUpdate:modelValue":t[6]||(t[6]=t=>e.filtros.origem=t),options:e.origens},null,8,["modelValue","options"]),j,(0,o.wy)((0,o.Wm)(N,{color:"blue",class:"q-pa-md",type:"submit",style:{width:"100%"},onClick:e.closeMenuFiltros},{default:s((()=>[C])),_:1},8,["onClick"]),[[ie]])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),I,(0,o.Wm)("div",S,[(0,o.Wm)("div",T,[(0,o.Wm)("img",{src:"https://www.lsiconsultoria.com.br/images/logotipo_galileo_plus.png",alt:"Logotipo Galileo Plus",style:"height: 75.2px; width: 200px;"},null,4),(0,o.Wm)("div",Z,[z,(0,o.Wm)("div",Q,[(0,o.Wm)("span",null," Período: "+(0,i.zw)(new Date(`${e.filtros.dataIni} `).toLocaleDateString("pt-br"))+" - "+(0,i.zw)(new Date(`${e.filtros.dataFim} `).toLocaleDateString("pt-br")),1),(0,o.Wm)("span",null," | Gerado: "+(0,i.zw)(new Date(Date.now()).toLocaleString("pt-br"))+" por "+(0,i.zw)(e.$store.state.user.nome),1)])])]),V,(0,o.Wm)("div",D,[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.rows,((t,l)=>((0,o.wg)(),(0,o.j4)("div",{key:l,style:{width:"100%","font-size":"14px","max-width":"400px",padding:"10px",margin:"10px","border-radius":"10px","box-shadow":"0px 2px 10px #d0d0d0"}},[9!==t["id_turno"]?((0,o.wg)(),(0,o.j4)("span",O,[(0,o.Wm)("strong",null,"Turno "+(0,i.zw)(t["id_turno"]),1)])):(0,o.kq)("",!0),9===t["id_turno"]?((0,o.wg)(),(0,o.j4)("span",$,[R])):(0,o.kq)("",!0),E,H,((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(Object.keys(t),((l,n)=>((0,o.wg)(),(0,o.j4)("div",{key:n,style:`display: flex; justify-content: between; padding: 5px; ${e.printStyles[l]?e.printStyles[l](t[l],t):""}`},[(0,o.Wm)("span",L,(0,i.zw)(e.columns.find((e=>e.name===l)).label),1),(0,o.Wm)("span",null,(0,i.zw)(e.columns.find((e=>e.name===l)).format?e.columns.find((e=>e.name===l)).format(t[l],t):t[l]),1)],4)))),128))])))),128))])])])}));l(107);var U=l(1959),K=l(4459),N=l(3649),P=l(6699);const Y=(0,U.iH)({dataIni:(0,N.C3)(0,3).inicio,dataFim:(0,N.C3)(0,3).fim,origem:"SISTEMA"}),A=[e=>!!e.dataIni&&!!e.dataIni||"Informe o período!"],G=function(e){return console.log(e),e.map((e=>{const t={id_turno:e.id_turno,dinheiro:parseFloat(e.dinheiro),pix:parseFloat(e.pix),credito:parseFloat(e.credito),debito:parseFloat(e.debito),voucher:parseFloat(e.voucher),outros:parseFloat(e.outros),total:parseFloat(e.total),despesa:parseFloat(e.despesa),pagamentos:parseFloat(e.pagamentos),recebimentos:parseFloat(e.recebimentos),liquido:parseFloat(e.liquido)};return t}))},B={id_turno:"turno",total:"bruto"},X={id_turno:e=>9===e?"Total do período":e,dinheiro:e=>(0,N.im)(e),credito:e=>(0,N.im)(e),debito:e=>(0,N.im)(e),outros:e=>(0,N.im)(e),pix:e=>(0,N.im)(e),voucher:e=>(0,N.im)(e),total:e=>(0,N.im)(e),despesa:e=>(0,N.im)(e),pagamentos:(e,t)=>9!==t.id_turno?"":`${(0,N.im)(e)}`,recebimentos:(e,t)=>9!==t.id_turno?"":`${(0,N.im)(e)}`,liquido:e=>(0,N.im)(e)},J={id_turno:e=>"hide",total:e=>"text-bold",despesa:e=>"text-red",pagamentos:(e,t)=>9===t.id_turno?"text-red":"hide",recebimentos:(e,t)=>9===t.id_turno?"text-green":"hide",liquido:e=>"text-bold"},ee={id_turno:e=>"display: none",total:e=>"font-weight: bold",despesa:e=>"color: red",pagamentos:(e,t)=>9===t.id_turno?"color: red":"display: none",recebimentos:(e,t)=>9===t.id_turno?"color: green":"display: none",liquido:e=>"font-weight: bold"},te={},le=function(e){return[]},oe=function(e){return Object.keys(e).map((t=>({name:t,label:(this.labels[t]||t).toUpperCase(),field:t,align:isNaN(parseInt(e[t]))?"left":"right",sortable:!0,format:this.format[t]})))},ie=(0,o.aZ)({name:"FeriaDoPeriodo",setup:()=>({origens:["CONFERENCIA","SISTEMA"],filtros:Y,format:X,labels:B,validate:A,setRows:G,setColumns:oe,setTotais:le,totaisColunas:te,classes:J,printStyles:ee}),data(){return{drawerFilters:!1,totais:[],rows:[],columns:[],visibleColumns:[]}},watch:{columns(){this.rows.length>0&&(this.visibleColumns=Object.keys(this.rows[0]),(this.$q.sessionStorage.getItem("gp-lojas-selec")||[]).length<2&&this.visibleColumns.splice(this.visibleColumns.indexOf("loja"),1))}},methods:{async gerarRelatorio(){if(!await this.valida())return;const e=await K.b.gerarRelatorio("feria_do_periodo",this.filtros);this.rows=this.setRows.bind(this)(e),this.columns=this.setColumns.bind(this)(this.rows[0]||{}),this.totais=this.setTotais.bind(this)(this.rows)},async valida(){const e=this.validate||[];for(let t=0;t<e.length;t++){const l=e[t],o=await l(this.filtros);if("string"===typeof o)return this.$q.notify({type:"negative",message:o}),!1}return!0},closeMenuFiltros(){this.drawerFilters=innerWidth>1200||!this.drawerFilters},exportar(e){let t=N.CK.array(this.rows);t=t.map((e=>Object.keys(e).reduce(((t,l)=>{const o=this.columns.find((e=>e.name===l));return t[o.label]=9===e.id_turno&&"id_turno"===l?"":(0,N.p3)(e[l]),t}),{}))),(0,P.m)(e||0,t)},imprimir(){const e=this.columns;if(e&&e.length>0){const e=document.getElementById("testeimpressao"),t=document.querySelector("#iframe_print");return t.contentWindow.document.open(),t.contentWindow.document.write(e.innerHTML),t.contentWindow.print(),void t.contentWindow.document.close()}this.$q.notify({type:"negative",message:"Nenhum dado para imprimir"})}}});var ne=l(2165),se=l(811),ae=l(7011),re=l(3414),de=l(2035),me=l(2025),ue=l(2428),pe=l(9570),ce=l(3747),fe=l(5269),be=l(4842),we=l(8516),he=l(6429),ge=l(6489),We=l(7518),ye=l.n(We);ie.render=M,ie.__scopeId="data-v-7d6b12d1";const xe=ie;ye()(ie,"components",{QBtn:ne.Z,QMenu:se.Z,QList:ae.Z,QItem:re.Z,QItemSection:de.Z,QSpace:me.Z,QDrawer:ue.Z,QToolbar:pe.Z,QToolbarTitle:ce.Z,QForm:fe.Z,QInput:be.Z,QSelect:we.Z,QTable:he.Z}),ye()(ie,"directives",{Ripple:ge.Z})}}]);